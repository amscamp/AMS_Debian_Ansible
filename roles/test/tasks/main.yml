---


- name: Gather the package facts
  ansible.builtin.package_facts:
    manager: auto

- name: check if master_pdf_editor is already installed
  ansible.builtin.set_fact:
    master_pdf_editor: "{{ ansible_facts.packages[item] }}"
  loop: "{{ ansible_facts.packages.keys() | select('match', '^master-pdf-editor.*') | list }}"

- name: determinate free-pdf-editor link
  shell: echo "https://code-industry.net/public/$(curl -s https://code-industry.net/free-pdf-editor/ | grep -o 'master-pdf-editor-[0-9]*\.[0-9]*\.[0-9]*\-qt5.x86_64.deb' | head -1)"
  register: tempurl

- name: debug
  ansible.builtin.debug:
    msg: "{{ tempurl }}"




# - name: Check whether a package called foobar is installed
#   ansible.builtin.debug:
#     msg: "{{ hostvars[inventory_hostname].master_pdf_editor[0].version }} of mpe is installed!"
#   when: hostvars[inventory_hostname].master_pdf_editor is defined

# - name: Check whether a package called foobar is installed
#   ansible.builtin.debug:
#     msg: "mpe is not installed!"
#   when: hostvars[inventory_hostname].master_pdf_editor is not defined



# - name: Install free-pdf-editor
#   apt: deb={{ tempurl.stdout }}


